(this["webpackJsonpelevators-template"]=this["webpackJsonpelevators-template"]||[]).push([[0],{111:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},138:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),s=(a(111),a(58)),o=a(12),l=a(191),d=a(36),j=a(92),u=a(87),O=a.n(u),b=Object(n.createContext)({}),h=function(){return Object(n.useContext)(b)},m=a(2),x=function(e){var t=e.children,a=e.forAdminOnly,n=Object(j.a)(e,["children","forAdminOnly"]),r=h().user;return O()(r)?Object(m.jsx)(o.a,{to:"/login"}):a&&!(null===r||void 0===r?void 0:r.isAdmin)?Object(m.jsx)(o.a,{to:"/my-account"}):Object(m.jsx)(o.b,Object(d.a)(Object(d.a)({},n),{},{children:t}))};x.defaultProps={forAdminOnly:!1};var p=a(20),f="FIRST",S="SECOND",g=a(91),A=a(198),E=a(195),v=a(193),_=a(182),N=a(181),R=a(197),C=a(179),T=a(66),D=a.n(T),P=a(141),y=a(177),L=a(180),I=a(33),w=function(e){var t=e;return{get:function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(null===(e=t)||void 0===e?void 0:e[a])||a},setLocales:function(e){t=e}}}(Object(d.a)(Object(d.a)(Object(d.a)(Object(d.a)({},{SIGN_IN:"Sign in",LOG_OUT:"Log out",EMAIL_ADDRESS_LABEL:"Email Address",PASSWORD_LABEL:"Password",REMEMBER_ME_LABEL:"Remember me",FORGOT_PASSWORD:"Forgot password?",GO_TO_SIGN_UP:"Don't have an account? Sign Up",SHORT_PASS:"Your password must be at least 8 symbols long",NEEDS_CAPTCHA:"Please, complete the reCAPTCHA"}),{SECOND_STEP_LABEL:"Confirmation code",SEND_CODE:"Send confirmation code",REQUEST_ERROR:"Oops, something went wrong. Please try again.",RELOAD_PAGE:"Reload Page"}),{APP_NAME:"Elevators",SWITCH_THEME:"Toggle light/dark theme"}),{ROW_NAME:"Name",ROW_ADDRESS_STREET:"Street",ROW_ADDRESS_ENTRANCE:"Entrance \u2116",ROW_ADDRESS_FLAT:"Flat \u2116",ROW_STATUS_IS_PAID:"Status",STATUS_PAID:"Paid",STATUS_UNPAID:"Not Paid"})).get,W=a(175),B=Object(W.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},marginBottom:{marginBottom:"20px"}}})),k=a(68),F=a(55),U=function(e){return new Promise((function(t){setTimeout(t,e)}))},G=1e3,M=function(e){var t={};return e.password.length<9&&(t.password="SHORT_PASS"),e.isCaptchaCompleted||(t.isCaptchaCompleted="NEEDS_CAPTCHA"),t},q=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),r=a[0],c=a[1],i=Object(k.a)({initialValues:{email:"",password:"",isCaptchaCompleted:!1},onSubmit:function(t){t.email,t.password;c(!0),U(G).then((function(){c(!1),e()}))},validate:M});return{formik:i,isLoading:r,onRecaptchaChange:function(e){i.setFieldValue("isCaptchaCompleted",Boolean(e))}}},H=function(e,t){return!!t.errors[e]&&t.touched[e]},J=function(e){var t=e.onSuccess,a=B(),n=Object(I.a)(),r=q(t),c=r.formik,i=r.isLoading,s=r.onRecaptchaChange;return Object(m.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(R.a,{className:a.backdrop,open:i,children:Object(m.jsx)(C.a,{color:"inherit"})}),Object(m.jsxs)("div",{className:a.paper,children:[Object(m.jsx)(A.a,{className:a.avatar,children:Object(m.jsx)(D.a,{})}),Object(m.jsx)(P.a,{component:"h1",variant:"h5",children:w("SIGN_IN")}),Object(m.jsxs)("form",{onSubmit:c.handleSubmit,className:a.form,children:[Object(m.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:w("EMAIL_ADDRESS_LABEL"),id:"email",name:"email",autoComplete:"email",type:"email",autoFocus:!0,onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.email,error:H("email",c),helperText:w(c.errors.email)}),Object(m.jsx)(v.a,{className:a.marginBottom,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:w("PASSWORD_LABEL"),name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.password,error:H("password",c),helperText:H("password",c)&&w(c.errors.password)}),Object(m.jsx)("div",{className:"flex-center",children:Object(m.jsx)(g.a,{onChange:s,sitekey:"6LfMfIcaAAAAAMLjS9J0yLsudH5cWfaWY1edFlfa",theme:n.palette.type})}),H("isCaptchaCompleted",c)&&Object(m.jsx)(L.a,{error:!0,variant:"filled",children:w(c.errors.isCaptchaCompleted)}),Object(m.jsx)(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:w("SIGN_IN")})]}),Object(m.jsxs)(N.a,{container:!0,children:[Object(m.jsx)(N.a,{item:!0,xs:!0,children:Object(m.jsx)(_.a,{href:"/",variant:"body2",children:w("FORGOT_PASSWORD")})}),Object(m.jsx)(N.a,{item:!0,children:Object(m.jsx)(_.a,{href:"/",variant:"body2",children:w("GO_TO_SIGN_UP")})})]})]})]})},K=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),r=a[0],c=a[1];return{formik:Object(k.a)({initialValues:{code:""},onSubmit:function(t){c(!0),(t.code,U(G).then((function(){return Promise.resolve(F)}))).then((function(t){c(!1),e(t)}))}}),isLoading:r}},V=function(e){var t=e.onSuccess,a=B(),n=K(t),r=n.formik,c=n.isLoading;return Object(m.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(R.a,{className:a.backdrop,open:c,children:Object(m.jsx)(C.a,{color:"inherit"})}),Object(m.jsxs)("div",{className:a.paper,children:[Object(m.jsx)(A.a,{className:a.avatar,children:Object(m.jsx)(D.a,{})}),Object(m.jsx)(P.a,{component:"h1",variant:"h5",children:w("SEND_CODE")}),Object(m.jsxs)("form",{onSubmit:r.handleSubmit,className:a.form,children:[Object(m.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:w("SECOND_STEP_LABEL"),id:"code",name:"code",type:"code",autoFocus:!0,onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.code,error:!!r.errors.code&&r.touched.code,helperText:w(r.errors.code)}),Object(m.jsx)(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:w("SEND_CODE")})]})]})]})},Y=function(){var e=Object(n.useState)(f),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(o.f)(),i=h().setUser;return Object(m.jsxs)(m.Fragment,{children:[a===f&&Object(m.jsx)(J,{onSuccess:function(){r(S)}}),a===S&&Object(m.jsx)(V,{onSuccess:function(e){i(e);var t=e.isAdmin?"/":"/my-account";c.push(t)}})]})},z=a(194),Q=function(){return Object(m.jsxs)(P.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(_.a,{target:"_blank",color:"inherit",href:"https://github.com/AleksanderKishchak",children:"The Creator"})," ",(new Date).getFullYear(),"."]})},X=(a(133),Object(W.a)((function(){return{footer:{paddingBottom:"5px"}}}))),Z=function(){var e=X();return Object(m.jsx)("div",{className:"footer-container",children:Object(m.jsx)(z.a,{mt:8,className:e.footer,children:Object(m.jsx)(Q,{})})})},$=a(183),ee=a(184),te=Object(W.a)((function(e){return{appBar:{backgroundColor:e.palette.info.dark},title:{flexGrow:1}}})),ae=function(){var e=te(),t=h(),a=t.user,n=t.setUser;return Object(m.jsx)($.a,{position:"static",className:e.appBar,children:Object(m.jsxs)(ee.a,{children:[Object(m.jsx)(P.a,{variant:"h6",className:e.title,children:w("APP_NAME")}),a&&Object(m.jsx)(E.a,{color:"inherit",onClick:function(){n(null)},children:w("LOG_OUT")})]})})},ne=a(188),re=a(190),ce=a(186),ie=a(187),se=a(189),oe=a(185),le=a(142),de=function(e){var t=e.rowData;return Object(m.jsxs)(oe.a,{children:[Object(m.jsx)(ce.a,{children:"".concat(t.firstName," ").concat(t.lastName)}),Object(m.jsx)(ce.a,{children:t.address.street}),Object(m.jsx)(ce.a,{children:t.address.entrance}),Object(m.jsx)(ce.a,{children:t.address.room}),Object(m.jsx)(ce.a,{children:t.status.isPaid?w("STATUS_PAID"):w("STATUS_UNPAID")})]})},je=a(10),ue=a.n(je),Oe=(ue.a.shape({firstName:ue.a.string.isRequired,lastName:ue.a.string.isRequired,address:ue.a.shape({street:ue.a.string.isRequired,entrance:ue.a.string.isRequired,room:ue.a.string.isRequired}).isRequired,status:ue.a.shape({isPaid:ue.a.bool.isRequired}).isRequired}),Object(W.a)({table:{minWidth:650}})),be=function(e){var t=e.users,a=Oe();return Object(m.jsx)(ie.a,{component:le.a,children:Object(m.jsxs)(ne.a,{className:a.table,children:[Object(m.jsx)(se.a,{children:Object(m.jsxs)(oe.a,{children:[Object(m.jsx)(ce.a,{children:w("ROW_NAME")}),Object(m.jsx)(ce.a,{children:w("ROW_ADDRESS_STREET")}),Object(m.jsx)(ce.a,{children:w("ROW_ADDRESS_ENTRANCE")}),Object(m.jsx)(ce.a,{children:w("ROW_ADDRESS_FLAT")}),Object(m.jsx)(ce.a,{children:w("ROW_STATUS_IS_PAID")})]})}),Object(m.jsx)(re.a,{children:t.map((function(e){return Object(m.jsx)(de,{rowData:e},"".concat(e.firstName,"_").concat(e.lastName))}))})]})})},he=Object(W.a)((function(){return{center:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},error:{marginBottom:20}}})),me=function(){var e=he(),t=h().user,a=Object(n.useState)(null),r=Object(p.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(null),o=Object(p.a)(s,2),l=o[0],d=o[1],j=Object(n.useState)(0),u=Object(p.a)(j,2),O=u[0],b=u[1];return Object(n.useEffect)((function(){var e,a=!1;return d(null),i(null),(e=t.id,U(G).then((function(){return e?Promise.reject(new Error("test error")):Promise.resolve(F)}))).then((function(e){a||d(e)})).catch((function(e){a||i(e)})),function(){a=!0}}),[O]),Object(m.jsx)("div",{className:"table-container flex-center",children:Object(m.jsxs)(y.a,{className:e.center,children:[!l&&c&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:e.error,children:Object(m.jsx)(P.a,{align:"center",color:"secondary",children:w("REQUEST_ERROR")})}),Object(m.jsx)(E.a,{variant:"contained",color:"secondary",onClick:function(){b(O+1)},children:w("RELOAD_PAGE")})]}),!l&&!c&&Object(m.jsx)(C.a,{}),l&&!c&&Object(m.jsx)(be,{users:[l]})]})})};a(134);var xe,pe=function(){return Object(m.jsxs)(s.a,{children:[Object(m.jsx)(ae,{}),Object(m.jsx)(l.a,{}),Object(m.jsx)(o.b,{path:"/login",children:Object(m.jsx)(Y,{})}),Object(m.jsx)(x,{exact:!0,path:"/",children:Object(m.jsx)("div",{children:"root"})}),Object(m.jsx)(x,{forAdminOnly:!0,path:"/buildings",children:Object(m.jsx)("div",{children:"buildings"})}),Object(m.jsx)(x,{path:"/my-account",children:Object(m.jsx)(me,{})}),Object(m.jsx)(Z,{})]})},fe=a(192),Se=a(51),ge=a(90),Ae=Object(ge.a)({palette:{type:"dark"}}),Ee=Object(ge.a)({palette:{type:"light"}}),ve="light",_e="dark",Ne=(xe={},Object(Se.a)(xe,ve,Ee),Object(Se.a)(xe,_e,Ae),xe),Re=function(e){var t=e.children,a=localStorage.getItem("theme")||ve,r=Object(n.useState)(F),c=Object(p.a)(r,2),i=c[0],s=c[1],o=Object(n.useState)(a),l=Object(p.a)(o,2),d=l[0],j={user:i,theme:d,setUser:s,setTheme:l[1]};return Object(m.jsx)(b.Provider,{value:j,children:Object(m.jsx)(fe.a,{theme:Ne[d],children:t})})},Ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,200)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Re,{children:Object(m.jsx)(pe,{})})}),document.getElementById("root")),Ce()},55:function(e){e.exports=JSON.parse('{"id":0,"isAdmin":true,"firstName":"Alex","lastName":"Kishchak","address":{"street":"Kosmichna 90","entrance":"1","room":"20"},"status":{"isPaid":true}}')}},[[138,1,2]]]);
//# sourceMappingURL=main.ee52810b.chunk.js.map
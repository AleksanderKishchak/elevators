(this["webpackJsonpelevators-template"]=this["webpackJsonpelevators-template"]||[]).push([[0],{135:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var a=function(t){t&&(e.location=t)}}).call(this,n(64))},159:function(e,t,n){},178:function(e,t,n){},264:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),s=(n(159),n(73)),o=n(13),l=n(327),j=n(37),d=n(140),u=n(132),b=n.n(u),O=Object(a.createContext)({}),h=function(){return Object(a.useContext)(O)},m=n(2),x=function(e){var t=e.children,n=e.forAdminOnly,a=Object(d.a)(e,["children","forAdminOnly"]),r=h().user;return b()(r)?Object(m.jsx)(o.a,{to:"/login"}):n&&!(null===r||void 0===r?void 0:r.isAdmin)?Object(m.jsx)(o.a,{to:"/my-account"}):Object(m.jsx)(o.b,Object(j.a)(Object(j.a)({},a),{},{children:t}))};x.defaultProps={forAdminOnly:!1};var f=n(20),p="FIRST",S="SECOND",g=n(139),v=n(334),A=n(315),_=n(329),E=n(317),N=n(316),R=n(333),T=n(313),C=n(83),D=n.n(C),y=n(270),I=n(311),P=n(314),L=n(28),W=function(e){var t=e;return{get:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(null===(e=t)||void 0===e?void 0:e[n])||n},setLocales:function(e){t=e}}}(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)(Object(j.a)({},{SIGN_IN:"\u0423\u0432\u0456\u0439\u0442\u0438",LOG_OUT:"\u0412\u0438\u0439\u0442\u0438",EMAIL_ADDRESS_LABEL:"\u0415\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430 \u0430\u0434\u0440\u0435\u0441\u0430",PASSWORD_LABEL:"\u041f\u0430\u0440\u043e\u043b\u044c",FORGOT_PASSWORD:"\u0412i\u0434\u043d\u043e\u0432\u0438\u0442\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",GO_TO_SIGN_UP:"\u0417\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044c",SHORT_PASS:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u0432\u0438\u043d\u0435\u043d \u043c\u0430\u0442\u0438 \u0449\u043e\u043d\u0430\u0439\u043c\u0435\u043d\u0448\u0435 8 \u0441\u0438\u043c\u0432\u043e\u043b\u0456\u0432",NEEDS_CAPTCHA:"\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u0440\u043e\u0439\u0434i\u0442\u044c reCAPTCHA"}),{SECOND_STEP_LABEL:"\u041a\u043e\u0434 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",SEND_CODE:"\u041d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438 \u043a\u043e\u0434 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f",REQUEST_ERROR:"\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437.",RELOAD_PAGE:"\u041f\u0435\u0440\u0435\u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443"}),{APP_NAME:"\u041b\u0438\u0444\u0442\u0438",SWITCH_THEME:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0441\u0432\u0456\u0442\u043b\u0443/\u0442\u0435\u043c\u043d\u0443 \u0442\u0435\u043c\u0443"}),{ROW_NAME:"\u0406\u043c'\u044f",ROW_ADDRESS_STREET:"\u0412\u0443\u043b\u0438\u0446\u044f",ROW_ADDRESS_ENTRANCE:"\u041f\u0456\u0434'\u0457\u0437\u0434 \u2116",ROW_ADDRESS_FLAT:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430 \u2116",ROW_STATUS_IS_PAID:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043e\u043f\u043b\u0430\u0442\u0438",STATUS_PAID:"\u0421\u043f\u043b\u0430\u0447\u0435\u043d\u043e",STATUS_UNPAID:"\u041d\u0435 \u0441\u043f\u043b\u0430\u0447\u0435\u043d\u043e"}),{BUILDINGS_LIST_NAME:"\u0421\u043f\u0438\u0441\u043e\u043a \u0431\u0443\u0434\u0456\u0432\u0435\u043b\u044c"})).get,B=n(309),w=Object(B.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},marginBottom:{marginBottom:"20px"}}})),k=n(86),U=n(62),F=n(135),G="http://localhost:3004",M=function(e){return new Promise((function(t){setTimeout(t,e)}))},q=1e3,H=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return fetch("".concat(G,"/").concat(e),{method:t,body:n,headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e&&e.errors?Promise.reject(e):e})).catch((function(e){return(null===e||void 0===e?void 0:e.errors)&&e.errors.some((function(e){return 401===e.status}))&&Object(F.a)("/login"),{}}))}("buildings")},J=function(e){var t={};return e.password.length<9&&(t.password="SHORT_PASS"),e.isCaptchaCompleted||(t.isCaptchaCompleted="NEEDS_CAPTCHA"),t},z=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],i=Object(k.a)({initialValues:{email:"",password:"",isCaptchaCompleted:!1},onSubmit:function(t){t.email,t.password;c(!0),M(q).then((function(){c(!1),e()}))},validate:J});return{formik:i,isLoading:r,onRecaptchaChange:function(e){i.setFieldValue("isCaptchaCompleted",Boolean(e))}}},K=function(e,t){return!!t.errors[e]&&t.touched[e]},V=function(e){var t=e.onSuccess,n=w(),a=Object(L.a)(),r=z(t),c=r.formik,i=r.isLoading,s=r.onRecaptchaChange;return Object(m.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(R.a,{className:n.backdrop,open:i,children:Object(m.jsx)(T.a,{color:"inherit"})}),Object(m.jsxs)("div",{className:n.paper,children:[Object(m.jsx)(v.a,{className:n.avatar,children:Object(m.jsx)(D.a,{})}),Object(m.jsx)(y.a,{component:"h1",variant:"h5",children:W("SIGN_IN")}),Object(m.jsxs)("form",{onSubmit:c.handleSubmit,className:n.form,children:[Object(m.jsx)(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:W("EMAIL_ADDRESS_LABEL"),id:"email",name:"email",autoComplete:"email",type:"email",autoFocus:!0,onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.email,error:K("email",c),helperText:W(c.errors.email)}),Object(m.jsx)(_.a,{className:n.marginBottom,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:W("PASSWORD_LABEL"),name:"password",type:"password",id:"password",autoComplete:"current-password",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.password,error:K("password",c),helperText:K("password",c)&&W(c.errors.password)}),Object(m.jsx)("div",{className:"flex-center",children:Object(m.jsx)(g.a,{onChange:s,sitekey:"6LfMfIcaAAAAAMLjS9J0yLsudH5cWfaWY1edFlfa",theme:a.palette.type,hl:"uk"})}),K("isCaptchaCompleted",c)&&Object(m.jsx)(P.a,{error:!0,variant:"filled",children:W(c.errors.isCaptchaCompleted)}),Object(m.jsx)(A.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:W("SIGN_IN")})]}),Object(m.jsxs)(N.a,{container:!0,children:[Object(m.jsx)(N.a,{item:!0,xs:!0,children:Object(m.jsx)(E.a,{href:"/",variant:"body2",children:W("FORGOT_PASSWORD")})}),Object(m.jsx)(N.a,{item:!0,children:Object(m.jsx)(E.a,{href:"/",variant:"body2",children:W("GO_TO_SIGN_UP")})})]})]})]})},Q=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1];return{formik:Object(k.a)({initialValues:{code:""},onSubmit:function(t){c(!0),(t.code,M(q).then((function(){return Promise.resolve(U)}))).then((function(t){c(!1),e(t)}))}}),isLoading:r}},Y=function(e){var t=e.onSuccess,n=w(),a=Q(t),r=a.formik,c=a.isLoading;return Object(m.jsxs)(I.a,{component:"main",maxWidth:"xs",children:[Object(m.jsx)(R.a,{className:n.backdrop,open:c,children:Object(m.jsx)(T.a,{color:"inherit"})}),Object(m.jsxs)("div",{className:n.paper,children:[Object(m.jsx)(v.a,{className:n.avatar,children:Object(m.jsx)(D.a,{})}),Object(m.jsx)(y.a,{component:"h1",variant:"h5",children:W("SEND_CODE")}),Object(m.jsxs)("form",{onSubmit:r.handleSubmit,className:n.form,children:[Object(m.jsx)(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:W("SECOND_STEP_LABEL"),id:"code",name:"code",type:"code",autoFocus:!0,onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.code,error:!!r.errors.code&&r.touched.code,helperText:W(r.errors.code)}),Object(m.jsx)(A.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:W("SEND_CODE")})]})]})]})},X=function(){var e=Object(a.useState)(p),t=Object(f.a)(e,2),n=t[0],r=t[1],c=Object(o.f)(),i=h().setUser;return Object(m.jsxs)(m.Fragment,{children:[n===p&&Object(m.jsx)(V,{onSuccess:function(){r(S)}}),n===S&&Object(m.jsx)(Y,{onSuccess:function(e){i(e);var t=e.isAdmin?"/":"/my-account";c.push(t)}})]})},Z=n(330),$=function(){return Object(m.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(m.jsx)(E.a,{target:"_blank",color:"inherit",href:"https://github.com/AleksanderKishchak",children:"The Creator"})," ",(new Date).getFullYear(),"."]})},ee=(n(178),Object(B.a)((function(){return{footer:{paddingBottom:"5px"}}}))),te=function(){var e=ee();return Object(m.jsx)("div",{className:"footer-container",children:Object(m.jsx)(Z.a,{mt:8,className:e.footer,children:Object(m.jsx)($,{})})})},ne=n(318),ae=n(319),re=Object(B.a)((function(e){return{appBar:{backgroundColor:e.palette.info.dark},title:{flexGrow:1}}})),ce=function(){var e=re(),t=h(),n=t.user,a=t.setUser;return Object(m.jsx)(ne.a,{position:"static",className:e.appBar,children:Object(m.jsxs)(ae.a,{children:[Object(m.jsx)(y.a,{variant:"h6",className:e.title,children:W("APP_NAME")}),n&&Object(m.jsx)(A.a,{color:"inherit",onClick:function(){a(null)},children:W("LOG_OUT")})]})})},ie=n(323),se=n(325),oe=n(321),le=n(322),je=n(324),de=n(320),ue=n(271),be=function(e){var t=e.rowData;return Object(m.jsxs)(de.a,{children:[Object(m.jsx)(oe.a,{children:"".concat(t.firstName," ").concat(t.lastName)}),Object(m.jsx)(oe.a,{children:t.address.street}),Object(m.jsx)(oe.a,{children:t.address.entrance}),Object(m.jsx)(oe.a,{children:t.address.room}),Object(m.jsx)(oe.a,{children:t.status.isPaid?W("STATUS_PAID"):W("STATUS_UNPAID")})]})},Oe=n(10),he=n.n(Oe),me=(he.a.shape({firstName:he.a.string.isRequired,lastName:he.a.string.isRequired,address:he.a.shape({street:he.a.string.isRequired,entrance:he.a.string.isRequired,room:he.a.string.isRequired}).isRequired,status:he.a.shape({isPaid:he.a.bool.isRequired}).isRequired}),Object(B.a)({table:{minWidth:650}})),xe=function(e){var t=e.users,n=me();return Object(m.jsx)(le.a,{component:ue.a,children:Object(m.jsxs)(ie.a,{className:n.table,children:[Object(m.jsx)(je.a,{children:Object(m.jsxs)(de.a,{children:[Object(m.jsx)(oe.a,{children:W("ROW_NAME")}),Object(m.jsx)(oe.a,{children:W("ROW_ADDRESS_STREET")}),Object(m.jsx)(oe.a,{children:W("ROW_ADDRESS_ENTRANCE")}),Object(m.jsx)(oe.a,{children:W("ROW_ADDRESS_FLAT")}),Object(m.jsx)(oe.a,{children:W("ROW_STATUS_IS_PAID")})]})}),Object(m.jsx)(se.a,{children:t.map((function(e){return Object(m.jsx)(be,{rowData:e},"".concat(e.firstName,"_").concat(e.lastName))}))})]})})},fe=Object(B.a)((function(){return{center:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},error:{marginBottom:20}}})),pe=function(){var e=fe(),t=h().user,n=Object(a.useState)(null),r=Object(f.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(null),o=Object(f.a)(s,2),l=o[0],j=o[1],d=Object(a.useState)(0),u=Object(f.a)(d,2),b=u[0],O=u[1];return Object(a.useEffect)((function(){var e,n=!1;return j(null),i(null),(e=t.id,M(q).then((function(){return e?Promise.reject(new Error("test error")):Promise.resolve(U)}))).then((function(e){n||j(e)})).catch((function(e){n||i(e)})),function(){n=!0}}),[b]),Object(m.jsx)("div",{className:"table-container flex-center",children:Object(m.jsxs)(I.a,{className:e.center,children:[!l&&c&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:e.error,children:Object(m.jsx)(y.a,{align:"center",color:"secondary",children:W("REQUEST_ERROR")})}),Object(m.jsx)(A.a,{variant:"contained",color:"secondary",onClick:function(){O(b+1)},children:W("RELOAD_PAGE")})]}),!l&&!c&&Object(m.jsx)(T.a,{}),l&&!c&&Object(m.jsx)(xe,{users:[l]})]})})},Se=n(136),ge=n.n(Se),ve=n(331),Ae=n(335),_e=n(326),Ee=n(137),Ne=n.n(Ee),Re=Object(B.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}})),Te=function(e){var t=e.building,n=Re();return Object(m.jsxs)(ve.a,{children:[Object(m.jsx)(Ae.a,{expandIcon:Object(m.jsx)(Ne.a,{}),children:Object(m.jsx)(y.a,{className:n.heading,children:t.street})}),Object(m.jsx)(_e.a,{children:Object(m.jsx)(y.a,{children:"content with entrances"})})]})},Ce=Object(B.a)((function(){return{listHeader:{padding:12,marginBottom:12}}})),De=function(e){var t=e.buildings,n=Ce();return Object(m.jsx)("div",{className:"table-container",children:Object(m.jsxs)(I.a,{children:[Object(m.jsx)(ue.a,{className:n.listHeader,children:Object(m.jsx)(y.a,{children:W("BUILDINGS_LIST_NAME")})}),Object(m.jsx)("div",{children:ge()(t,(function(e){return Object(m.jsx)(Te,{building:e},e.id)}))})]})})},ye=function(){var e=h().user,t=Object(a.useState)(null),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){var t=!1;return H(e.id).then((function(e){t||c(e||null)})),function(){t=!0}}),[]),Object(m.jsx)(m.Fragment,{children:r&&Object(m.jsx)(De,{buildings:r})})};n(264);var Ie,Pe=function(){return Object(m.jsxs)(s.a,{basename:"/elevators",children:[Object(m.jsx)(ce,{}),Object(m.jsx)(l.a,{}),Object(m.jsx)(o.b,{path:"/login",children:Object(m.jsx)(X,{})}),Object(m.jsx)(x,{exact:!0,path:"/",children:Object(m.jsx)("div",{children:"root"})}),Object(m.jsx)(x,{forAdminOnly:!0,path:"/buildings",children:Object(m.jsx)(ye,{})}),Object(m.jsx)(x,{path:"/my-account",children:Object(m.jsx)(pe,{})}),Object(m.jsx)(te,{})]})},Le=n(328),We=n(59),Be=n(138),we=Object(Be.a)({palette:{type:"dark"}}),ke=Object(Be.a)({palette:{type:"light"}}),Ue="light",Fe="dark",Ge=(Ie={},Object(We.a)(Ie,Ue,ke),Object(We.a)(Ie,Fe,we),Ie),Me=function(e){var t=e.children,n=localStorage.getItem("theme")||Ue,r=Object(a.useState)(U),c=Object(f.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)(n),l=Object(f.a)(o,2),j=l[0],d={user:i,theme:j,setUser:s,setTheme:l[1]};return Object(m.jsx)(O.Provider,{value:d,children:Object(m.jsx)(Le.a,{theme:Ge[j],children:t})})},qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,337)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(Me,{children:Object(m.jsx)(Pe,{})})}),document.getElementById("root")),qe()},62:function(e){e.exports=JSON.parse('{"id":0,"isAdmin":true,"firstName":"Alex","lastName":"Kishchak","address":{"buildingId":"0","entranceId":"0","street":"Kosmichna 90","entrance":"1","room":"20"},"status":{"isPaid":true}}')}},[[268,1,2]]]);
//# sourceMappingURL=main.453cb778.chunk.js.map